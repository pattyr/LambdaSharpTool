Name: LambdaSharpS3PackageLoader

Description: LambdaSharp resource handler for S3 Packages

Parameters:

  - Name: S3BucketPermissions
    Description: LambdaSharpS3PackageLoader requires read-write access to all buckets
    Values: 
      - "arn:aws:s3:::{{Tier}}-*"
      - "arn:aws:s3:::{{Tier}}-*/*"
    Resource:
      Type: AWS::S3::Bucket
      Allow: ReadWrite

  - Name: S3PackageLoaderCustomResourceTopic
    Description: Custom resource topic for synchronizaing packages with S3 buckets
    Export: /{{Tier}}/LambdaSharp/S3PackageLoaderCustomResourceTopic
    Resource:
      Type: AWS::SNS::Topic
      Allow: Subscribe

Functions:

  - Name: ResourceHandler
    Memory: 128
    Timeout: 300
    Sources:
      - Topic: S3PackageLoaderCustomResourceTopic
